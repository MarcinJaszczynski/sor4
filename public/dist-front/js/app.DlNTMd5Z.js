import{a as p}from"./vendor.NIGUFBhG.js";import{S as f}from"./sortable.DJo-CWZx.js";window.axios=p;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function h(e,i,n=null){e&&f.create(e,{group:"program-points",animation:150,handle:"span",onEnd:function(a){const o=e.dataset.parentId?parseInt(e.dataset.parentId):null,r=Array.from(e.children).map(t=>t.dataset.id);i.call("updateOrder",o,r)}})}document.addEventListener("DOMContentLoaded",function(){function e(){return window.location.href.replace(/\/$/,"")+"/reorder"}function i(n){fetch(e(),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({order:n})}).then(a=>{if(!a.ok)throw new Error("Reorder failed");return a.json()}).then(()=>{window.dispatchEvent(new CustomEvent("eventProgramReordered"))}).catch(a=>{console.error(a),window.dispatchEvent(new CustomEvent("eventProgramReorderFailed",{detail:{error:a.message}}))})}document.querySelectorAll(".pp-dnd-root").forEach(function(n){n.querySelectorAll(".pp-dnd-list .pp-row");const a=n.querySelector(".pp-dnd-save");a&&a.addEventListener("click",function(){const r=Array.from(n.querySelectorAll(".pp-dnd-list .pp-row")).map((t,d)=>{const c=t.getAttribute("data-pp-id"),l=t.getAttribute("data-parent-id")||null,m=t.getAttribute("data-day")||null,u=t.getAttribute("data-order")||d;return{id:parseInt(c),parent_id:l?parseInt(l):null,day:m?parseInt(m):null,order:parseInt(u)}});window.livewire?window.livewire.emit("saveOrderFromDnDPayload",r):i(r)}),n.querySelectorAll(".pp-move-up").forEach(function(o){o.addEventListener("click",function(r){const d=r.target.closest(".pp-row")?.getAttribute("data-pp-id");window.livewire&&window.livewire.emit("callMethod","moveUp",parseInt(d))})}),n.querySelectorAll(".pp-move-down").forEach(function(o){o.addEventListener("click",function(r){const d=r.target.closest(".pp-row")?.getAttribute("data-pp-id");window.livewire&&window.livewire.emit("callMethod","moveDown",parseInt(d))})})})});(function(){function e(o){o==="dark"?document.documentElement.setAttribute("data-theme","dark"):o==="light"&&document.documentElement.setAttribute("data-theme","light")}const i=localStorage.getItem("sor3-theme");if(i)e(i);else{const o=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;e(o?"dark":"light")}window.sor3Theme={set:function(o){localStorage.setItem("sor3-theme",o),e(o)},clear:function(){localStorage.removeItem("sor3-theme"),e("light")}};function n(){const o=["[data-theme-toggle]",'[aria-label*="theme" i]','[aria-label*="Tryb" i]',".theme-toggle",".toggle-theme",".filament-theme-toggle"];let r=null;for(const t of o){const d=document.querySelector(t);if(d){r=d;break}}r&&r.addEventListener("click",function(t){const c=(document.documentElement.hasAttribute("data-theme")?"dark":"light")==="dark"?"light":"dark";window.sor3Theme.set(c)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n();function a(){const o=[".filament-header",".filament-topbar",".filament-navbar",".filament-app-header",".filament-main-header","header"];let r=null;for(const c of o){const l=document.querySelector(c);if(l){r=l;break}}if(!r||r.querySelector("[data-theme-toggle]"))return;const t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("aria-label","PrzeÅ‚Ä…cz motyw"),t.setAttribute("data-theme-toggle",""),t.className="filament-button filament-button-size-sm",t.style.marginLeft="0.5rem",t.innerHTML="ðŸŒ“",t.addEventListener("click",function(){const l=(document.documentElement.hasAttribute("data-theme")?"dark":"light")==="dark"?"light":"dark";window.sor3Theme.set(l)});const d=r.querySelector(".filament-header-actions")||r.querySelector(".filament-topbar-actions");d?d.appendChild(t):r.appendChild(t)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})();function s(){const e=document.getElementById("cookie-manage");if(e){if(e.parentElement!==document.body)try{document.body.appendChild(e)}catch{}e.style.setProperty("position","fixed","important"),e.style.setProperty("right","16px","important"),e.style.setProperty("bottom","84px","important"),e.style.setProperty("z-index","2147483647","important"),e.style.setProperty("white-space","normal","important"),e.style.setProperty("min-width","0","important")}}function w(){const e=document.querySelectorAll(".scroll-top");if(!(e.length<=1))for(let i=0;i<e.length-1;i++){const n=e[i];n&&n.parentNode&&n.parentNode.removeChild(n)}}function g(e,i=150){let n;return function(...a){clearTimeout(n),n=setTimeout(()=>e.apply(this,a),i)}}document.addEventListener("DOMContentLoaded",()=>{s(),w()});window.addEventListener("load",s);window.addEventListener("resize",g(s,150));window.initProgramPointTreeDnD=h;
